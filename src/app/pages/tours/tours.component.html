<div class="tour-management-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h3 class="page-title">
        Tour Management
      </h3>
      <p class="page-subtitle">Manage and organize all your tours efficiently</p>
    </div>
    <button class="btn-create" (click)="openCreateModal()">
      <span class="btn-icon">+</span>
      Create New Tour
    </button>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <!-- <div class="stat-icon active">üìä</div> -->
      <div class="stat-info">
        <h3>{{ tours.length }}</h3>
        <p>Total Tours</p>
      </div>
    </div>
    <div class="stat-card">
      <!-- <div class="stat-icon pending">‚è≥</div> -->
      <div class="stat-info">
        <h3>3</h3>
        <p>Active Tours</p>
      </div>
    </div>
    <div class="stat-card">
      <!-- <div class="stat-icon completed">‚úì</div> -->
      <div class="stat-info">
        <h3>12</h3>
        <p>Completed</p>
      </div>
    </div>
  </div>

  <!-- Tours Table -->
  <div class="table-container">
    <div class="table-header">
      <h3 class="page-title">All Tours</h3>
      <div class="table-actions">
        <input type="text" class="search-input" placeholder="Search tours..." [(ngModel)]="searchTerm">
        <select class="filter-select">
          <option value="">All Status</option>
          <option value="active">Active</option>
          <option value="completed">Completed</option>
          <option value="upcoming">Upcoming</option>
        </select>
      </div>
    </div>

    <div class="table-wrapper">
      <table class="tours-table">
        <thead>
          <tr>
            <th>Tour ID</th>
            <th>Tour Name</th>
            <th>Tour Leader</th>
            <!-- <th>Agent Staff</th> -->
            <th>Brief</th>
            <th>Services</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tour of tours" class="table-row">
            <td>
              <span class="tour-id">{{ tour.tourId }}</span>
            </td>
            <td>
              <div class="tour-name">
                <span class="name-text">{{ tour.tourName }}</span>
              </div>
            </td>
            <td>
              <div class="staff-info">
                <div class="staff-details">
                  <div class="staff-name">{{ tour.assignedTourLeader.name }}</div>
                  <div class="staff-contact">{{ tour.assignedTourLeader.contact }}</div>
                </div>
              </div>
            </td>
            <!-- <td>
              <div class="staff-info">
                <div class="staff-details">
                  <div class="staff-name">{{ tour.agentStaff.name }}</div>
                  <div class="staff-contact">{{ tour.agentStaff.contact }}</div>
                </div>
              </div>
            </td> -->
            <td>
              <span class="brief-text">{{ tour.details.brief }}</span>
            </td>
            <td>
              <span class="service-badge">{{ tour.details.servicesBooked.length }} Services</span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn-action edit" (click)="editTour(tour)" title="Edit Tour">
                  ‚úèÔ∏è
                </button>
                <button class="btn-action delete" (click)="deleteTour(tour.tourId)" title="Delete Tour">
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Create/Edit Modal -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">
          {{ isEditMode ? 'Edit Tour' : 'Create New Tour' }}
        </h2>
        <button class="btn-close" (click)="closeModal()">‚úï</button>
      </div>

      <div class="modal-body">
        <form class="tour-form">
          <!-- Basic Information Section -->
          <div class="form-section">
            <h3 class="section-title">
              Basic Information
            </h3>
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Tour ID</label>
                <input type="text" class="form-input" [(ngModel)]="tourForm.tourId" name="tourId" placeholder="T12345">
              </div>
              <div class="form-group">
                <label class="form-label">Tour Name</label>
                <input type="text" class="form-input" [(ngModel)]="tourForm.tourName" name="tourName" placeholder="Enter tour name">
              </div>
            </div>
          </div>

          <!-- Staff Assignment Section -->
          <div class="form-section">
            <h3 class="section-title">
              Staff Assignment
            </h3>
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Tour Leader</label>
                <select class="form-input" [(ngModel)]="tourForm.assignedTourLeader.id" name="tourLeaderId">
                  <option value="">Select Tour Leader</option>
                  <option value="TL001">Ritesh Shukla</option>
                  <option value="TL002">Kuldeep Gope</option>
                  <option value="TL003">Swati Rawat</option>
                </select>
              </div>
              <!-- <div class="form-group">
                <label class="form-label">Agent Staff</label>
                <select class="form-input" [(ngModel)]="tourForm.agentStaff.id" name="agentStaffId">
                  <option value="">Select Agent</option>
                  <option value="AG001">Travel Agency A</option>
                  <option value="AG002">Travel Agency B</option>
                  <option value="AG003">Travel Agency C</option>
                </select>
              </div> -->
              <div class="form-group">
                <label class="form-label">Emergency Duty Staff</label>
                <select class="form-input" [(ngModel)]="tourForm.emergencyDutyStaff.id" name="emergencyStaffId">
                  <option value="">Select Emergency Staff</option>
                  <option value="ED001">Emergency Staff 1</option>
                  <option value="ED002">Emergency Staff 2</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">EI Staff</label>
                <select class="form-input" name="elStaffId">
                  <option value="">Select EI Staff</option>
                  <option value="EL001">Support Staff 1</option>
                  <option value="EL002">Support Staff 2</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Tour Details Section -->
          <div class="form-section">
            <h3 class="section-title">
              Tour Details
            </h3>
            <div class="form-group">
              <label class="form-label">Brief Description</label>
              <textarea class="form-input" [(ngModel)]="tourForm.details.brief" name="brief" rows="3" placeholder="Enter tour brief description"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Itinerary</label>
              <div class="itinerary-list">
                <div class="itinerary-item" *ngFor="let item of tourForm.details.itinerary; let i = index">
                  <span class="day-badge">Day {{ i + 1 }}</span>
                  <input type="text" class="form-input itinerary-input" [(ngModel)]="tourForm.details.itinerary[i]" [name]="'itinerary' + i" placeholder="Enter day plan">
                  <button class="btn-remove" type="button" (click)="removeItinerary(i)">‚úï</button>
                </div>
              </div>
              <button class="btn-add" type="button" (click)="addItinerary()">+ Add Day</button>
            </div>
          </div>

          <!-- Services Section -->
          <div class="form-section">
            <h3 class="section-title">
              Services Booked
            </h3>
            <div class="services-list">
              <div class="service-item" *ngFor="let service of tourForm.details.servicesBooked; let i = index">
                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label">Service Type</label>
                    <select class="form-input" [(ngModel)]="service.type" [name]="'serviceType' + i">
                      <option value="">Select Type</option>
                      <option value="Hotel">Hotel</option>
                      <option value="Transport">Transport</option>
                      <option value="Restaurant">Restaurant</option>
                      <option value="Guide">Guide</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Provider</label>
                    <input type="text" class="form-input" [(ngModel)]="service.provider" [name]="'provider' + i" placeholder="Provider name">
                  </div>
                  <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-input" [(ngModel)]="service.status" [name]="'status' + i">
                      <option value="Pending">Pending</option>
                      <option value="Confirmed">Confirmed</option>
                      <option value="Cancelled">Cancelled</option>
                    </select>
                  </div>
                </div>
                <button class="btn-remove-service" type="button" (click)="removeService(i)">Remove Service</button>
              </div>
            </div>
            <button class="btn-add" type="button" (click)="addService()">+ Add Service</button>
          </div>

          <!-- Contacts Section -->
          <div class="form-section">
            <h3 class="section-title">
              Contacts
            </h3>
            <div class="contacts-grid">
              <div class="contact-group">
                <label class="form-label">Drivers</label>
                <div class="driver-item" *ngFor="let driver of tourForm.contacts.drivers; let i = index">
                  <input type="text" class="form-input" [(ngModel)]="driver.name" [name]="'driverName' + i" placeholder="Driver name">
                  <input type="text" class="form-input" [(ngModel)]="driver.phone" [name]="'driverPhone' + i" placeholder="Phone number">
                  <button class="btn-remove" type="button" (click)="removeDriver(i)">‚úï</button>
                </div>
                <button class="btn-add-small" type="button" (click)="addDriver()">+ Add Driver</button>
              </div>
              <div class="contact-group">
                <label class="form-label">Restaurants</label>
                <div class="restaurant-item" *ngFor="let restaurant of tourForm.contacts.restaurants; let i = index">
                  <input type="text" class="form-input" [(ngModel)]="restaurant.name" [name]="'restaurantName' + i" placeholder="Restaurant name">
                  <button class="btn-remove" type="button" (click)="removeRestaurant(i)">‚úï</button>
                </div>
                <button class="btn-add-small" type="button" (click)="addRestaurant()">+ Add Restaurant</button>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" type="button" (click)="closeModal()">Cancel</button>
        <button class="btn-save" type="button" (click)="saveTour()">
          {{ isEditMode ? 'Update Tour' : 'Create Tour' }}
        </button>
      </div>
    </div>
  </div>
</div>